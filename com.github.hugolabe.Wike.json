{
  "app-id" : "com.github.hugolabe.Wike",
  "runtime" : "org.gnome.Platform",
  "runtime-version" : "47",
  "sdk" : "org.gnome.Sdk",
  "command" : "wike",
  "finish-args" : [
    "--share=network",
    "--share=ipc",
    "--socket=fallback-x11",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--device=dri"
  ],
  "modules" : [
    {
      "name": "xapian-core",
      "config-opts": [
        "--disable-sse",
        "--disable-backend-chert",
        "--disable-backend-remote",
        "--disable-documentation",
        "--enable-static"
      ],
      "sources": [
        {
          "type": "archive",
          "sha256": "bcbc99cfbf16080119c2571fc296794f539bd542ca3926f17c2999600830ab61",
          "url": "https://oligarchy.co.uk/xapian/1.4.27/xapian-core-1.4.27.tar.xz",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 15919,
            "url-template": "https://oligarchy.co.uk/xapian/$version/xapian-core-$version.tar.xz"
          }
        }
      ]
    },
    {
      "name": "libzim",
      "buildsystem": "meson",
      "builddir": true,
      "config-opts": [
        "--wrap-mode=nodownload",
        "-Dtest_data_dir=none",
        "-Dexamples=false"
      ],
      "cleanup": [
        "/bin",
        "/include",
        "/lib/pkgconfig"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/openzim/libzim.git",
          "tag": "9.2.3",
          "commit": "398a3c25059ee0ec7e2987d6af336d67dd681ba1",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 20193,
            "tag-template": "$version"
          }
        }
      ]
    },
    {
      "name": "python3-libzim",
      "buildsystem": "simple",
      "build-options": {
        "env": [
          "DONT_DOWNLOAD_LIBZIM=1",
          "USE_SYSTEM_LIBZIM=1"
        ]
      },
      "build-commands": [
        "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"libzim\" --no-build-isolation"
      ],
      "sources": [
        {
          "type": "file",
          "url": "https://files.pythonhosted.org/packages/78/f6/11e18f0dc92a518b2e88c970a480e0832fc3b44efdb2bb95de5c1ea7e226/libzim-3.6.0.tar.gz",
          "sha256": "4dfc3a73e9e3c6e8f60a3b134f27069d74e96c4949c5aa20bb2ba994b00120be",
          "x-checker-data": {
            "type": "pypi",
            "name": "libzim"
          }
        }
      ]
    },
    {
      "name" : "wike",
      "buildsystem" : "meson",
      "builddir" : true,
      "run-tests" : true,
      "sources" : [
        {
          "type" : "dir",
          "path" : "."
        }
      ]
    }
  ]
}
